stages:
    - pre-build
    - build

build_lib:
    image: maven:3.8.4-eclipse-temurin-16
    stage: pre-build
    artifacts:
        untracked: false
        expire_in: 7 days
        paths:
            - /root/.m2/*
    script:
        - cd lib && mvn clean install

build_spigot:
    image: maven:3.8.4-eclipse-temurin-16
    stage: build
    artifacts:
        untracked: false
        expire_in: 7 days
        paths:
            - spigot/target/*.jar
    script:
        - cd ../spigot && mvn clean package

build_velocity:
    image: maven:3.8.4-eclipse-temurin-16
    stage: build
    artifacts:
        untracked: false
        expire_in: 7 days
        paths:
            - velocity/target/*.jar
    script:
        - cd ../velocity && mvn clean package
